<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=e3762d939e96b99b008a0c07533364593af96cbf">


    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Play With Libff | Random notes</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Play With Libff" />
<meta name="author" content="Danny Willems" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="DRAFT !!!!" />
<meta property="og:description" content="DRAFT !!!!" />
<link rel="canonical" href="http://localhost:4000/2019/07/09/play-with-libff.html" />
<meta property="og:url" content="http://localhost:4000/2019/07/09/play-with-libff.html" />
<meta property="og:site_name" content="Random notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-09T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"DRAFT !!!!","author":{"@type":"Person","name":"Danny Willems"},"@type":"BlogPosting","url":"http://localhost:4000/2019/07/09/play-with-libff.html","headline":"Play With Libff","dateModified":"2019-07-09T00:00:00+00:00","datePublished":"2019-07-09T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/07/09/play-with-libff.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <h1>Random notes</h1>
        <h2>Random notes on FP, blockchain/DLT, crypto currency, cryptography, (computational) algebra, (computational) number theory, logic, type system, maybe quantum computing</h2>

        <section id="downloads">
          
          <a href="https://github.com/dannywillems/dannywillems.github.io" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>9 July 2019</small>
<h1>Play With Libff</h1>

<p class="view">by Danny Willems</p>

<h1 id="draft-">DRAFT !!!!</h1>

<p>I’ve been recently interested in the implementation of elliptic curves and zero
knowledge proof and I’ve
found <a href="https://github.com/scipr-lab/libff">libff</a>. This cpp library implements
some elliptic curves and provides a small API to represent the fields
<script type="math/tex">\mathbb{F}_{p}</script> for p prime in cpp.
In particular, <code class="highlighter-rouge">libff</code> is used in
<a href="https://github.com/scipr-lab/libsnark">libsnark</a>.</p>

<p>libff uses <a href="https://gmplib.org/">libgmp</a>, a library dealing with arbitrary
precision arithmetic. You can represent arbitrary large naturals (<code class="highlighter-rouge">mp_limb_t</code>), integers (<code class="highlighter-rouge">mpz_t</code>),
rationals (<code class="highlighter-rouge">mpq_t</code>) and reals (<code class="highlighter-rouge">mpf_t</code>, even if the authors recommend to use the
more specific library
<a href="https://www.mpfr.org/">mpfr</a>). I suppose the <code class="highlighter-rouge">mp</code> prefixes comes from <code class="highlighter-rouge">multiple
precision</code> and <code class="highlighter-rouge">z</code>/<code class="highlighter-rouge">q</code>/<code class="highlighter-rouge">r</code> for the respective describing set. A quick
introduction to basics can be found
<a href="https://gmplib.org/manual/GMP-Basics.html#GMP-Basics">here</a>. It is recommended
to read it to understand the different types used in libff. A particular
definition is <code class="highlighter-rouge">limb</code>, which is the type of a single machine word. Any type (or
any multiple precision number) uses multiple limbs.</p>

<p>The installation is quite straighforward by using the instructions given
<a href="https://github.com/scipr-lab/libff#build-guide">here</a>. For users on Ubuntu
18.04, <code class="highlighter-rouge">libprocps3-dev</code> has been replaced by <code class="highlighter-rouge">libprocps-dev</code> (<code class="highlighter-rouge">procps</code> is used
for profiling, it can be deactivated using the cmake option
<code class="highlighter-rouge">-DWITH_PROCPS=off</code>). For the article, we will suppose the library is installed
in <code class="highlighter-rouge">$LOCAL_LIBRARY_DIRECTORY</code>
(<code class="highlighter-rouge">-DCMAKE_INSTALL_PREFIX=$LOCAL_LIBRARY_DIRECTORY</code>).</p>

<p>The implementation is platform-dependent as some ASM code is used (for
optimisation I guess). It seems some ASM codes use can be deactivated by using
the cmake option <code class="highlighter-rouge">-DUSE_ASM=off</code>, but this option is only implemented for a few
parts.</p>

<p>Uppercase characters will be used to represent points and lowercase characters
will be used to represent scalars.</p>

<h2 id="repository-structure">Repository structure</h2>

<ul>
  <li><a href="https://github.com/scipr-lab/libff/tree/master/libff/algebra/exponentiation">exponentiation</a>: implements the <a href="https://en.wikipedia.org/wiki/Exponentiation_by_squaring">exponentiation by squaring</a> algorithm on a generic field T.</li>
  <li><a href="https://github.com/scipr-lab/libff/blob/master/libff/algebra/fields">fields</a>:
represent a generic field of order p in the class <code class="highlighter-rouge">Fp_model</code>. The interface
of <script type="math/tex">\mathbb{F}_p</script> is given in the file
<a href="https://github.com/scipr-lab/libff/blob/master/libff/algebra/fields/fp.hpp">fp.hpp</a> and its implementation in <a href="https://github.com/scipr-lab/libff/blob/master/libff/algebra/fields/fp.tcc">fp.tcc</a>.</li>
</ul>

<h2 id="further-readings-for-me">Further readings for me</h2>

<p>When I’ve been going through the codebase, I’ve faced loads of algorithm names
or notions I did not know/have. Here a list:</p>
<ul>
  <li>Bos-Coster algorithm</li>
  <li>Comba multiplication</li>
  <li>fast multiple exponentation: problem of computing <script type="math/tex">\prod_{i = 0}^{n} g_{i}^{e_{i}}</script>. I found <a href="https://www.bmoeller.de/pdf/multiexp-sac2001.pdf">this article</a> written by Bodo Moeller. I’ll need to have a look.</li>
  <li>fast scalar multiplication: problem of computing <script type="math/tex">\sum_{i = 0}^{n} k_i P_i</script>.
This <a href="https://cryptojedi.org/peter/data/eccss-20130911b.pdf">pdf</a> may be
interesting to read.</li>
  <li><a href="https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm">Tonelli-Shanks algorithm</a></li>
  <li>I’ve noticed the OCaml library <a href="https://github.com/ocaml/zarith">Zarith</a> uses
libgmp under the hood. Could be nice to have a look. Also, could be
interesting to have some benchmarks.</li>
  <li>libff uses intensively cpp templates, especially with non type parameters. It
was the first time I’ve been facing this syntax and <a href="http://www.cplusplus.com/doc/oldtutorial/templates/">this
page</a> helped me to
understand what is going on. The part <em>Non-type parameters for templates</em> is
the one you’d like to have a look if you want to know how it does work.</li>
  <li><a href="https://github.com/scipr-lab/libff/blob/master/libff/algebra/fields/fp.tcc#L166">Montgomery
reduction</a></li>
</ul>



  <small>tags: <em>SNARK</em> - <em>ZK</em> - <em>Zero Knowledge</em> - <em>Finite Fields</em> - <em>libff</em> - <em>libsnark</em></small>


      </section>
    </div>

    
  </body>
</html>


